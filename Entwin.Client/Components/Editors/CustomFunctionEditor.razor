@using Entwin.Client.Components
@using Microsoft.AspNetCore.Components

<div class="editor-panel">
    <h4>Custom Function Editor</h4>

    <div class="form-group">
        <label>Expression:</label>
        <input type="text"
                class="form-control"
                @bind="Component.UserInput"
                @bind:event="oninput" 
                @onclick:stopPropagation
               />
    </div>

    <div class="form-actions">
        <button class="btn btn-primary" @onclick="Apply">Apply</button>
        <button class="btn btn-secondary" @onclick="Close">Close</button>
    </div>
</div>

@code {
    [Parameter]
    public CustomFunction Component { get; set; } = default!;

    [Parameter]
    public EventCallback OnClose { get; set; }

    private void Apply()
    {
        Component.DisplayName = $"Y = {Component.UserInput}";
    }

    private void Close()
    {
        OnClose.InvokeAsync();
    }
}
